<div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg text-gray-900 dark:text-gray-100">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold flex items-center gap-2">
      ğŸ’° Uplate investitora
    </h2>

    <a
      routerLink="/orders"
      class="flex items-center gap-2 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100
             px-4 py-2 rounded-xl shadow hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200"
    >
      â¬… <span class="font-medium">Nazad na porudÅ¾bine</span>
    </a>
  </div>

  <!-- ğŸ“¥ Forma za uplatu -->
  <form (ngSubmit)="addInvestment()" class="grid sm:grid-cols-4 gap-4 mb-6">
    <input
      [(ngModel)]="newInvestment.company"
      name="company"
      type="text"
      placeholder="Firma"
      required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    />
    <input
      [(ngModel)]="newInvestment.date"
      name="date"
      type="date"
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    />
    <input
      [(ngModel)]="newInvestment.full_amount"
      name="full_amount"
      type="number"
      placeholder="Iznos (din)"
      required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    />
    <button
      type="submit"
      class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition"
    >
      â• Dodaj uplatu
    </button>
  </form>

  <!-- ğŸ’¸ Forma za isplatu -->
  <form (ngSubmit)="addWithdrawal()" class="grid sm:grid-cols-4 gap-4 mb-8">
    <select
      [(ngModel)]="newWithdrawal.company"
      name="wCompany"
      required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    >
      <option value="" disabled selected>Izaberite firmu</option>
      <option *ngFor="let c of companies" [value]="c">{{ c }}</option>
    </select>

    <input
      [(ngModel)]="newWithdrawal.date"
      name="wDate"
      type="date"
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    />

    <input
      [(ngModel)]="newWithdrawal.amount"
      name="wAmount"
      type="number"
      placeholder="Iznos (din)"
      required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full"
    />

    <button
      type="submit"
      class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition"
    >
      â– Dodaj isplatu
    </button>
  </form>

  <!-- ğŸ“‹ Istorija uplata -->
  <h3 class="text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100">ğŸ“‹ Istorija uplata</h3>
  <table class="w-full text-left border-collapse mb-6">
    <thead>
      <tr class="border-b dark:border-gray-600">
        <th class="p-2">Firma</th>
        <th class="p-2">Datum</th>
        <th class="p-2">Ukupno</th>
        <th class="p-2">Preostalo</th>
        <th class="p-2 text-right">Akcije</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let inv of remainingAmounts()"
        class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/60 transition"
      >
        <td class="p-2">{{ inv.company }}</td>
        <td class="p-2">{{ inv.date }}</td>
        <td class="p-2">{{ inv.full_amount | number }} din</td>
        <td class="p-2 text-green-600">{{ inv.remaining_amount | number }} din</td>
        <td class="p-2 text-right">
          <button
            type="button"
            (click)="deleteInvestment(inv)"
            class="text-sm px-3 py-1 rounded-lg bg-red-100 text-red-700 hover:bg-red-200
                   dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900 transition"
          >
            ğŸ—‘ ObriÅ¡i
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- ğŸ’µ Isplate -->
  <h3 class="text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100">ğŸ’µ Isplate</h3>
  <table class="w-full text-left border-collapse mb-6">
    <thead>
      <tr class="border-b dark:border-gray-600">
        <th class="p-2">Firma</th>
        <th class="p-2">Datum</th>
        <th class="p-2">Iznos</th>
        <th class="p-2 text-right">Akcije</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="let wd of investmentService.withdrawals()"
        class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/60 transition"
      >
        <td class="p-2">{{ wd.company }}</td>
        <td class="p-2">{{ wd.date }}</td>
        <td class="p-2 text-red-500">-{{ wd.amount | number }} din</td>
        <td class="p-2 text-right">
          <button
            type="button"
            (click)="deleteWithdrawal(wd)"
            class="text-sm px-3 py-1 rounded-lg bg-red-100 text-red-700 hover:bg-red-200
                   dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900 transition"
          >
            ğŸ—‘ ObriÅ¡i
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- ğŸ“Š Ukupni podaci -->
  <div class="mt-6 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg text-lg font-medium dark:text-gray-50">
    ğŸ’° Ukupno uplaÄ‡eno: <b>{{ totalInvested() | number }}</b> din <br />
    ğŸ’¸ Ukupno podignuto: <b>{{ totalWithdrawn() | number }}</b> din <br />
    âœ… Preostalo: <b>{{ totalRemaining() | number }}</b> din
  </div>
</div>

<h3 class="text-lg font-semibold mt-10 mb-4 text-gray-800 dark:text-gray-100">ğŸ¢ Istorija firmi</h3>

<div class="flex flex-wrap gap-3">
  <span *ngFor="let c of investmentService.companies()"
        class="bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100
               px-3 py-1 rounded-full text-sm font-medium shadow-sm hover:bg-gray-300 dark:hover:bg-gray-600
               transition-colors duration-200 cursor-default">
    {{ c.name }}
  </span>
</div>


