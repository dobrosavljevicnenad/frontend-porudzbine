<div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg text-gray-900 dark:text-gray-100">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold flex items-center gap-2">
      ðŸ’° Uplate investitora
    </h2>

    <a
      routerLink="/orders"
      class="flex items-center gap-2 bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-100
             px-4 py-2 rounded-xl shadow hover:bg-gray-200 dark:hover:bg-gray-600 transition-all duration-200"
    >
      â¬… <span class="font-medium">Nazad na porudÅ¾bine</span>
    </a>
  </div>

  <!-- ðŸ“¥ Forma za uplatu -->
  <form (ngSubmit)="addInvestment()" class="grid sm:grid-cols-4 gap-4 mb-6">
    <input [(ngModel)]="newInvestment.company" name="company" type="text" placeholder="Firma" required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full" />
    <input [(ngModel)]="newInvestment.date" name="date" type="date"
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full" />
    <input [(ngModel)]="newInvestment.full_amount" name="full_amount" type="number" placeholder="Iznos (din)" required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full" />
    <button type="submit"
      class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">âž• Dodaj uplatu</button>
  </form>

  <!-- ðŸ’¸ Forma za isplatu -->
  <form (ngSubmit)="addWithdrawal()" class="grid sm:grid-cols-4 gap-4 mb-8">
    <select [(ngModel)]="newWithdrawal.company" name="wCompany" required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full">
      <option value="" disabled selected>Izaberite firmu</option>
      <option *ngFor="let c of companies" [value]="c">{{ c }}</option>
    </select>

    <input [(ngModel)]="newWithdrawal.date" name="wDate" type="date"
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full" />

    <input [(ngModel)]="newWithdrawal.amount" name="wAmount" type="number" placeholder="Iznos (din)" required
      class="px-3 py-2 rounded-lg border dark:bg-gray-700 dark:border-gray-600 dark:text-gray-50 w-full" />

    <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
      âž– Dodaj isplatu
    </button>
  </form>

  <!-- ðŸ“‹ Istorija uplata -->
  <h3 class="text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100">ðŸ“‹ Istorija uplata</h3>
  <table class="w-full text-left border-collapse mb-6">
    <thead>
      <tr class="border-b dark:border-gray-600">
        <th class="p-2">Firma</th>
        <th class="p-2">Datum</th>
        <th class="p-2">Ukupno</th>
        <th class="p-2">Preostalo</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let inv of remainingAmounts()" class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/60 transition">
        <td class="p-2">{{ inv.company }}</td>
        <td class="p-2">{{ inv.date }}</td>
        <td class="p-2">{{ inv.full_amount | number }} din</td>
        <td class="p-2 text-green-600">{{ inv.remaining_amount | number }} din</td>
      </tr>
    </tbody>
  </table>

  <!-- ðŸ’µ Isplate -->
  <h3 class="text-lg font-semibold mb-2 text-gray-800 dark:text-gray-100">ðŸ’µ Isplate</h3>
  <table class="w-full text-left border-collapse mb-6">
    <thead>
      <tr class="border-b dark:border-gray-600">
        <th class="p-2">Firma</th>
        <th class="p-2">Datum</th>
        <th class="p-2">Iznos</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let wd of investmentService.withdrawals()" class="border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/60 transition">
        <td class="p-2">{{ wd.company }}</td>
        <td class="p-2">{{ wd.date }}</td>
        <td class="p-2 text-red-500">-{{ wd.amount | number }} din</td>
      </tr>
    </tbody>
  </table>

  <!-- ðŸ“Š Ukupni podaci -->
  <div class="mt-6 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg text-lg font-medium dark:text-gray-50">
    ðŸ’° Ukupno uplaÄ‡eno: <b>{{ totalInvested() | number }}</b> din <br />
    ðŸ’¸ Ukupno podignuto: <b>{{ totalWithdrawn() | number }}</b> din <br />
    âœ… Preostalo: <b>{{ totalRemaining() | number }}</b> din
  </div>
</div>
